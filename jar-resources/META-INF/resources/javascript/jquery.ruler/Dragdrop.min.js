
var Dragdrop=function(j){var c=null,g=0,l=this,f=null,i=document.documentElement,e=document.body,d=(document.body.scrollWidth>document.documentElement.clientWidth)?document.body.scrollWidth:document.documentElement.clientWidth,k=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight),b=function(o){var q=o.clientX-c.posX,n=o.clientY-c.posY,m=q-(q%c.snap)+"px",p=n-(n%c.snap)+"px";if(g===1){switch(c.mode){case 0:c.style.top=p;c.style.left=m;break;case 1:c.style.left=m;break;case 2:c.style.top=p;break}if(c.mode!==2){if(q<=c.minX){c.style.left=c.minX+"px"}if(c.offsetLeft+c.offsetWidth>=c.maxX){c.style.left=(c.maxX-c.offsetWidth)+"px"}}if(c.mode!==1){if(n<=c.minY){c.style.top=c.minY+"px"}if(c.offsetTop+c.offsetHeight>=c.maxY){c.style.top=(c.maxY-c.offsetHeight)+"px"}}c.onMove(c)}},a=function(m,n){if(n.className.indexOf("draggable")!==-1){j.prevent(m);f=j.attach("mousemove",document,b,true);g=1;c=n;c.posX=m.clientX-c.offsetLeft;c.posY=m.clientY-c.offsetTop;if(c.mode===undefined){l.set(c)}c.onStart(c);if(c.setCapture){c.setCapture()}}},h=function(){if(g===1){g=0;c.onStop(c);j.detach("mousemove",document,f);if(c.releaseCapture){c.releaseCapture()}}};j.attach("mousedown",document,a,false);j.attach("mouseup",document,h,false);this.start=a;this.set=function(n,o){var m=o||{};c=(typeof n==="string")?document.getElementById(n):n;c.mode=m.mode||0;c.minX=m.minX||0;c.maxX=m.maxX||d;c.minY=m.minY||0;c.maxY=m.maxY||k;c.snap=m.snap||1;c.onStart=m.onstart||function(){};c.onMove=m.onmove||function(){};c.onStop=m.onstop||function(){};c.style.left=c.offsetLeft+"px";c.style.top=c.offsetTop+"px";c.unselectable="on"}};